# LLM Context — Bluetooth Performance Testing Lab

**Audience:** OpenAI Codex
**Purpose:** Provide persistent, authoritative context so Codex can assist with this repository without re-discovery, hallucination, or scope creep.

This document defines **what this project is**, **what has already been done**, and **what Codex is explicitly allowed and not allowed to do**.

---

## 1. Project Summary (High-Level)

This repository implements a **Bluetooth performance testing laboratory** focused on understanding how Bluetooth **profiles, protocols, and hardware** impact real-world performance.

The lab measures and analyzes:

* Throughput
* Latency
* Jitter
* Stability

Across:

* Bluetooth Classic (PAN, RFCOMM, HID, A2DP)
* Bluetooth Low Energy (GATT-based data transfer)

The project prioritizes **repeatability, traceability, and protocol-level understanding** over synthetic benchmarks.

---

## 2. Current Project State (IMPORTANT)

At the time this document is written:

* ✅ Test environment is fully defined and documented.
* ✅ Hardware for Linux A and Linux B is finalized.
* ✅ OS, firmware, BlueZ versions are locked.
* ✅ Test topology is finalized.
* ✅ Lab report structure is written.
* ✅ BLE mock, central clients, analysis scripts, and scenario automation (`run_full_matrix`) are implemented.
* ⚠️ **BLE connectivity between Linux A ↔ Linux B is currently unreliable**. After refactoring the mock and automation scripts, Linux B’s BlueZ stack frequently fails to complete LE connections (Bleak reports `BleakDeviceNotFoundError` or connection timeouts) even when `btmon` shows mock advertisements. The failure persists even when using the upstream BlueZ example GATT/advertisement scripts, indicating the issue lies with controller state (adapter cache/discovery) rather than our mock.

⚠️ **No experiments have been executed yet**
⚠️ **No performance data exists yet**
⚠️ **No conclusions should be written**

Codex **must not invent data**.

---

## 3. Test Environment Snapshot (Reference)

### Linux A (Server / NAP)

* OS: Ubuntu 24.04.3 LTS
* CPU: Intel Core i9-10920X
* RAM: 32 GB
* Bluetooth: Intel USB controller, Bluetooth 5.3
* BlueZ: 5.72
* Role: PAN NAP, primary server

### Linux B (Client / PANU)

* OS: Ubuntu 24.04.3 LTS
* CPU: Intel Core i7-7600U
* RAM: 16 GB
* Bluetooth: Intel USB controller, Bluetooth 4.2
* BlueZ: 5.72
* Role: PANU, primary client

---

## 4. Repository Structure (Authoritative)

```
bluetooth-performance-lab/
├── README.md
├── docs/
│   ├── lab_report.md
│   ├── bluetooth_architecture.md
│   ├── test_topology.md
│   └── LLM_CONTEXT.md
├── experiments/
│   ├── pan/
│   ├── rfcomm/
│   ├── ble_gatt/
│   └── interference/
├── scripts/
│   ├── pan/
│   ├── rfcomm/
│   └── ble/
├── logs/
│   ├── btmon/
│   ├── iperf/
│   └── rfcomm/
├── results/
│   ├── tables/
│   └── plots/
└── notes/
```

Codex should **respect this structure** and place outputs in the correct directories.

---

## 5. Codex Permissions (STRICT)

Codex is explicitly allowed to:

* ✅ Write scripts (e.g., shell scripts, Python tools)
* ✅ Modify experiment documentation under `experiments/`
* ✅ Parse raw logs into structured tables
* ✅ Generate plots from collected data
* ✅ Suggest conclusions **without writing final conclusions**

Codex is explicitly **NOT allowed** to:

* ❌ Invent or fabricate performance data
* ❌ Modify hardware or environment descriptions
* ❌ Rewrite finalized documentation (`README.md`, `docs/bluetooth_architecture.md`, `docs/test_topology.md`) unless explicitly instructed
* ❌ Write final conclusions without user approval

---

## 6. Coding and Documentation Guidelines

When generating code or scripts:

* Prefer clarity over brevity
* Include comments explaining Bluetooth-specific behavior
* Avoid hardcoding MAC addresses unless explicitly requested
* Make scripts idempotent where possible

When modifying documentation:

* Do not remove existing sections
* Only append or fill in explicitly marked areas
* Clearly label autogenerated content

---

## 7. Experiment Workflow Expectations

Typical Codex-assisted workflow:

1. User requests help running a specific experiment
2. Codex generates setup or execution scripts
3. User runs experiments manually
4. User provides raw logs
5. Codex parses logs and generates tables/plots
6. Codex suggests analysis points
7. User writes final conclusions

---

## 8. Anti-Hallucination Rules (Critical)

If Codex lacks sufficient information:

* Ask for clarification
* Request logs or outputs
* Do **not** assume defaults

If a requested task would violate permissions:

* Explain why
* Suggest an allowed alternative

---

## 9. Key Principle

> Codex acts as a **lab assistant and automation helper**, not as the experimenter or analyst of record.

All authoritative decisions, interpretations, and conclusions remain the responsibility of the human operator.

---

## 10. End of Context

This document should be read **before any Codex interaction** related to this repository.
